app = "polynumeral-assistant"
primary_region = "iad"

[build]
  dockerfile = "Dockerfile.fly"

[env]
  LOG_SERVICE_URL = "http://localhost:8081/log"
  LOG_FILE = "/data/logs/agent.jsonl"
  AGENT_MODE = "zulip"

[mounts]
  source = "agent_data"
  destination = "/data"
  # Single volume for all persistent state:
  #   /data/nanobot/   — JSONL sessions, MEMORY.md, HISTORY.md
  #   /data/logs/      — append-only JSONL audit log
  # Fly takes daily snapshots, retained 5 days.

[[vm]]
  size = "shared-cpu-2x"
  memory = 2048
